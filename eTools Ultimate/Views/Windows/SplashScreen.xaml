<Window
    x:Class="eTools_Ultimate.Views.Windows.SplashScreen"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:behaviors="http://schemas.microsoft.com/xaml/behaviors"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:viewmodels="clr-namespace:eTools_Ultimate.ViewModels.Windows"
    Title="SplashScreen"
    Width="450"
    Height="250"
    d:DataContext="{d:DesignInstance viewmodels:SplashScreenViewModel,
                                     IsDesignTimeCreatable=False}"
    AllowsTransparency="True"
    Background="Transparent"
    ResizeMode="NoResize"
    WindowStartupLocation="CenterScreen"
    WindowStyle="None"
    mc:Ignorable="d">
    <behaviors:Interaction.Triggers>
        <behaviors:EventTrigger EventName="Loaded">
            <behaviors:InvokeCommandAction Command="{Binding LoadCommand}" />
        </behaviors:EventTrigger>
    </behaviors:Interaction.Triggers>
    <Window.TaskbarItemInfo>
        <TaskbarItemInfo
            x:Name="taskbarItemInfo"
            ProgressState="Normal"
            ProgressValue="{Binding LoadingProgress, Mode=OneWay}" />
    </Window.TaskbarItemInfo>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <StackPanel
            Grid.Row="0"
            HorizontalAlignment="Center"
            VerticalAlignment="Center">
            <Image
                Width="500"
                Height="150"
                RenderOptions.BitmapScalingMode="HighQuality"
                Source="pack://application:,,,/Assets/Images/SplashScreen.png"
                Stretch="Uniform" />
            <TextBlock
                x:Name="LoadingText"
                Margin="0,10,0,0"
                HorizontalAlignment="Center"
                FontSize="12"
                Foreground="White"
                Text="{Binding LoadingText}" />
            <ProgressBar
                Width="400"
                Height="5"
                Margin="0,10,0,0"
                IsIndeterminate="True">
                <ProgressBar.Foreground>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                        <GradientStop Offset="0" Color="#0065DC" />
                        <GradientStop Offset="1" Color="#00C2FF" />
                    </LinearGradientBrush>
                </ProgressBar.Foreground>
            </ProgressBar>
        </StackPanel>

        <TextBlock
            Grid.Row="2"
            Margin="0,2,0,0"
            HorizontalAlignment="Right"
            Foreground="Gray"
            Text="{Binding Version}" />

        <ContentPresenter x:Name="RootContentDialog" Grid.Row="0" />
    </Grid>
</Window> 