<ui:FluentWindow
    x:Class="eTools_Ultimate.Views.Windows.LoadingErrorWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:i18n="http://schemas.lepo.co/i18n/2022/xaml"
    xmlns:local="clr-namespace:eTools_Ultimate.Views.Windows"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    Title="{i18n:StringLocalizer 'Datei nicht gefunden'}"
    Width="650"
    Height="450"
    d:DataContext="{d:DesignInstance local:LoadingErrorWindow,
                                     IsDesignTimeCreatable=True}"
    ui:Design.Background="{DynamicResource ApplicationBackgroundBrush}"
    ui:Design.Foreground="{DynamicResource TextFillColorPrimaryBrush}"
    ExtendsContentIntoTitleBar="True"
    Foreground="{DynamicResource TextFillColorPrimaryBrush}"
    ResizeMode="NoResize"
    WindowBackdropType="Mica"
    WindowCornerPreference="Round"
    WindowStartupLocation="CenterScreen"
    mc:Ignorable="d">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Header mit Icon und Titel -->
        <StackPanel
            Grid.Row="0"
            Margin="0,0,0,20"
            HorizontalAlignment="Center"
            Orientation="Horizontal">
            <ui:SymbolIcon
                Width="48"
                Height="48"
                Margin="0,0,15,0"
                FontSize="48"
                Foreground="{DynamicResource SystemFillColorCautionBrush}"
                Symbol="Warning24" />
            <StackPanel VerticalAlignment="Center">
                <TextBlock
                    FontSize="24"
                    FontWeight="SemiBold"
                    Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                    Text="{i18n:StringLocalizer 'Datei nicht gefunden'}" />
                <TextBlock
                    FontSize="14"
                    Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                    Text="{i18n:StringLocalizer 'Eine erforderliche Datei konnte nicht geladen werden'}" />
            </StackPanel>
        </StackPanel>

        <!-- Fehlermeldung und Details -->
        <Border
            Grid.Row="1"
            Margin="0,0,0,20"
            Padding="20"
            Background="{DynamicResource CardBackgroundFillColorDefaultBrush}"
            BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}"
            BorderThickness="1"
            CornerRadius="8">
            <StackPanel>
                <TextBlock
                    Margin="0,0,0,15"
                    FontSize="16"
                    FontWeight="SemiBold"
                    Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                    Text="{i18n:StringLocalizer 'Was ist passiert?'}" />
                
                <TextBlock
                    Margin="0,0,0,10"
                    FontSize="14"
                    Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                    Text="{i18n:StringLocalizer 'Die Anwendung konnte eine wichtige Datei nicht finden. Dies kann passieren, wenn:'}"
                    TextWrapping="Wrap" />
                
                <StackPanel Margin="20,0,0,15">
                    <TextBlock
                        Margin="0,0,0,5"
                        FontSize="13"
                        Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                        Text="• Die Datei wurde verschoben oder gelöscht"
                        TextWrapping="Wrap" />
                    <TextBlock
                        Margin="0,0,0,5"
                        FontSize="13"
                        Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                        Text="• Der Pfad ist nicht korrekt"
                        TextWrapping="Wrap" />
                    <TextBlock
                        Margin="0,0,0,5"
                        FontSize="13"
                        Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                        Text="• Die Datei ist beschädigt"
                        TextWrapping="Wrap" />
                </StackPanel>

                <Border
                    Margin="0,10,0,0"
                    Padding="15"
                    Background="{DynamicResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}"
                    BorderThickness="1"
                    CornerRadius="6">
                    <StackPanel>
                        <TextBlock
                            FontSize="13"
                            FontWeight="SemiBold"
                            Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                            Text="{i18n:StringLocalizer 'Fehlende Datei:'}" />
                        <TextBlock
                            x:Name="ErrorMessageTextBox"
                            Margin="0,5,0,0"
                            FontSize="12"
                            FontFamily="Consolas"
                            Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                            TextWrapping="Wrap" />
                    </StackPanel>
                </Border>
            </StackPanel>
        </Border>

        <!-- Aktionsbuttons -->
        <StackPanel
            Grid.Row="2"
            HorizontalAlignment="Center"
            Orientation="Horizontal">
            <ui:Button
                MinWidth="140"
                Height="36"
                Margin="0,0,10,0"
                Padding="15,0"
                Appearance="Primary"
                Content="{i18n:StringLocalizer 'Ordner öffnen'}"
                Icon="Folder24"
                Click="Button_Click" />
            <ui:Button
                MinWidth="160"
                Height="36"
                Margin="10,0,0,0"
                Padding="15,0"
                Appearance="Secondary"
                Content="{i18n:StringLocalizer 'Anwendung beenden'}"
                Icon="Dismiss24"
                Click="Button_Click_1" />
        </StackPanel>
    </Grid>
</ui:FluentWindow>
