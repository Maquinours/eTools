<ui:FluentWindow
    x:Class="eTools_Ultimate.Views.Windows.LoadingErrorWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:i18n="http://schemas.lepo.co/i18n/2022/xaml"
    xmlns:local="clr-namespace:eTools_Ultimate.Views.Windows"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    xmlns:vm="clr-namespace:eTools_Ultimate.ViewModels.Windows"
    Title="{Binding Title, Mode=OneWay}"
    Width="650"
    Height="450"
    d:DataContext="{d:DesignInstance vm:LoadingErrorWindowViewModel,
                                     IsDesignTimeCreatable=True}"
    ui:Design.Background="{DynamicResource ApplicationBackgroundBrush}"
    ui:Design.Foreground="{DynamicResource TextFillColorPrimaryBrush}"
    ExtendsContentIntoTitleBar="True"
    Foreground="{DynamicResource TextFillColorPrimaryBrush}"
    ResizeMode="NoResize"
    WindowBackdropType="Mica"
    WindowCornerPreference="Round"
    WindowStartupLocation="CenterScreen"
    mc:Ignorable="d">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!--  Header mit Icon und Titel  -->
        <StackPanel
            Grid.Row="0"
            Margin="0,0,0,20"
            HorizontalAlignment="Center"
            Orientation="Horizontal">
            <ui:SymbolIcon
                Width="48"
                Height="48"
                Margin="0,0,15,0"
                FontSize="48"
                Foreground="{DynamicResource SystemFillColorCautionBrush}"
                Symbol="Warning24" />
            <StackPanel VerticalAlignment="Center">
                <TextBlock
                    FontSize="24"
                    FontWeight="SemiBold"
                    Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                    Text="{Binding Title, Mode=OneWay}" />
                <TextBlock
                    FontSize="14"
                    Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                    Text="{Binding Description, Mode=OneWay}" />
            </StackPanel>
        </StackPanel>

        <!--  Fehlermeldung und Details  -->
        <Border
            Grid.Row="1"
            Margin="0,0,0,20"
            Padding="20"
            Background="{DynamicResource CardBackgroundFillColorDefaultBrush}"
            BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}"
            BorderThickness="1"
            CornerRadius="8">
            <StackPanel>
                <TextBlock
                    Margin="0,0,0,15"
                    FontSize="16"
                    FontWeight="SemiBold"
                    Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                    Text="{i18n:StringLocalizer 'What happened?'}" />

                <TextBlock
                    Margin="0,0,0,10"
                    FontSize="14"
                    Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                    Text="{Binding Explaination, Mode=OneWay}"
                    TextWrapping="Wrap" />

                <StackPanel Margin="20,0,0,15">
                    <ItemsControl ItemsSource="{Binding ExplainationCauses, Mode=OneWay}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <TextBlock
                                    Margin="0,0,0,5"
                                    FontSize="13"
                                    Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                                    Text="{Binding Mode=OneWay}"
                                    TextWrapping="Wrap" />
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>

                <Border
                    Margin="0,10,0,0"
                    Padding="15"
                    Background="{DynamicResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}"
                    BorderThickness="1"
                    CornerRadius="6">
                    <Border.Style>
                        <Style TargetType="Border">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding FilePath}" Value="{x:Null}">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Border.Style>
                    <StackPanel>
                        <TextBlock
                            FontSize="13"
                            FontWeight="SemiBold"
                            Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                            Text="{i18n:StringLocalizer 'Path concerned:'}" />
                        <TextBlock
                            x:Name="ErrorMessageTextBox"
                            Margin="0,5,0,0"
                            FontFamily="Consolas"
                            FontSize="12"
                            Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                            Text="{Binding FilePath}"
                            TextWrapping="Wrap" />
                    </StackPanel>
                </Border>
            </StackPanel>
        </Border>

        <!--  Aktionsbuttons  -->
        <StackPanel
            Grid.Row="2"
            HorizontalAlignment="Center"
            Orientation="Horizontal">
            <ui:Button
                Height="36"
                MinWidth="140"
                Margin="0,0,10,0"
                Padding="15,0"
                Appearance="Primary"
                Click="Button_Click"
                Content="{i18n:StringLocalizer 'Open configuration'}"
                Icon="Folder24" />
            <ui:Button
                Height="36"
                MinWidth="160"
                Margin="10,0,0,0"
                Padding="15,0"
                Appearance="Secondary"
                Click="Button_Click_1"
                Content="{i18n:StringLocalizer 'Exit Application'}"
                Icon="Dismiss24" />
        </StackPanel>
    </Grid>
</ui:FluentWindow>
