<Page
    x:Class="eTools_Ultimate.Views.Windows.ChangelogDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    xmlns:local="clr-namespace:eTools_Ultimate.Views.Windows"
    Title="Changelog"
    Background="#80000000"
    Height="Auto"
    Width="Auto"
    KeyDown="Page_KeyDown"
    mc:Ignorable="d"
    Focusable="True"
    FocusVisualStyle="{x:Null}">

    <Page.Resources>
        <!-- Iconstyles für die verschiedenen Änderungstypen -->
        <Style x:Key="IconBase" TargetType="ui:SymbolIcon">
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="Margin" Value="0,0,8,0"/>
            <Setter Property="VerticalAlignment" Value="Top"/>
        </Style>
        
        <Style x:Key="AddedIcon" TargetType="ui:SymbolIcon" BasedOn="{StaticResource IconBase}">
            <Setter Property="Foreground" Value="#4CAF50"/>
            <Setter Property="Symbol" Value="Add24"/>
        </Style>
        
        <Style x:Key="ChangedIcon" TargetType="ui:SymbolIcon" BasedOn="{StaticResource IconBase}">
            <Setter Property="Foreground" Value="#FF9800"/>
            <Setter Property="Symbol" Value="Wrench24"/>
        </Style>
        
        <Style x:Key="RemovedIcon" TargetType="ui:SymbolIcon" BasedOn="{StaticResource IconBase}">
            <Setter Property="Foreground" Value="#F44336"/>
            <Setter Property="Symbol" Value="Delete24"/>
        </Style>
        
        <Style x:Key="FixedIcon" TargetType="ui:SymbolIcon" BasedOn="{StaticResource IconBase}">
            <Setter Property="Foreground" Value="#9C27B0"/>
            <Setter Property="Symbol" Value="Bug24"/>
        </Style>
        
        <Style x:Key="ImprovedIcon" TargetType="ui:SymbolIcon" BasedOn="{StaticResource IconBase}">
            <Setter Property="Foreground" Value="#2196F3"/>
            <Setter Property="Symbol" Value="ArrowCircleUp24"/>
        </Style>
        
        <Style x:Key="UpdatedIcon" TargetType="ui:SymbolIcon" BasedOn="{StaticResource IconBase}">
            <Setter Property="Foreground" Value="#FFD700"/>
            <Setter Property="Symbol" Value="ArrowSync24"/>
        </Style>
        
        <!-- Stile für die Textblöcke -->
        <Style x:Key="VersionTitle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="{DynamicResource TextFillColorPrimaryBrush}"/>
            <Setter Property="Margin" Value="0,8,0,4"/>
        </Style>
        
        <Style x:Key="VersionDate" TargetType="TextBlock">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Foreground" Value="{DynamicResource TextFillColorSecondaryBrush}"/>
            <Setter Property="Margin" Value="8,10,0,0"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>
        
        <Style x:Key="ChangeText" TargetType="TextBlock">
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="TextWrapping" Value="Wrap"/>
            <Setter Property="Margin" Value="0,0,0,0"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="Foreground" Value="{DynamicResource TextFillColorPrimaryBrush}"/>
        </Style>
        
        <!-- DataTemplate für einen Bullet Point -->
        <DataTemplate x:Key="BulletPointTemplate">
            <Grid Margin="0,4,0,4">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <ContentControl Grid.Column="0" Content="{Binding Icon}"/>
                <TextBlock Grid.Column="1" Text="{Binding Text}" Style="{StaticResource ChangeText}"/>
            </Grid>
        </DataTemplate>
    </Page.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <Rectangle Grid.Row="0" Fill="Transparent" MouseLeftButtonDown="CloseButton_Click"/>
        
        <ui:Card Background="{DynamicResource ApplicationBackgroundBrush}" 
                 BorderBrush="{DynamicResource ControlElevationBorderBrush}" 
                 MaxWidth="900" 
                 MaxHeight="700"
                 VerticalAlignment="Center"
                 HorizontalAlignment="Center"
                 Margin="20">
            <Grid Margin="16">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Header mit Schließen-Button -->
                <Grid Grid.Row="0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    
                    <TextBlock Grid.Column="0"
                               Text="Changelog"
                               FontSize="24" 
                               FontWeight="Bold" 
                               Foreground="{DynamicResource TextFillColorPrimaryBrush}" 
                               Margin="0,0,0,16"/>
                    
                    <ui:Button Grid.Column="1"
                               Appearance="Transparent"
                               HorizontalAlignment="Right"
                               VerticalAlignment="Top"
                               Content="X"
                               FontWeight="Bold"
                               Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                               Click="CloseButton_Click"/>
                </Grid>

                <!-- Legende -->
                <WrapPanel Grid.Row="1" Margin="0,0,0,16">
                    <StackPanel Orientation="Horizontal" Margin="0,0,16,0">
                        <ui:SymbolIcon Symbol="Add24" Foreground="#4CAF50" FontSize="12"/>
                        <TextBlock Text="Added" Margin="4,0,0,0" FontSize="12" Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                    </StackPanel>
                    
                    <StackPanel Orientation="Horizontal" Margin="0,0,16,0">
                        <ui:SymbolIcon Symbol="Wrench24" Foreground="#FF9800" FontSize="12"/>
                        <TextBlock Text="Changed" Margin="4,0,0,0" FontSize="12" Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                    </StackPanel>
                    
                    <StackPanel Orientation="Horizontal" Margin="0,0,16,0">
                        <ui:SymbolIcon Symbol="Delete24" Foreground="#F44336" FontSize="12"/>
                        <TextBlock Text="Removed" Margin="4,0,0,0" FontSize="12" Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                    </StackPanel>
                    
                    <StackPanel Orientation="Horizontal" Margin="0,0,16,0">
                        <ui:SymbolIcon Symbol="Bug24" Foreground="#9C27B0" FontSize="12"/>
                        <TextBlock Text="Fixed" Margin="4,0,0,0" FontSize="12" Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                    </StackPanel>
                    
                    <StackPanel Orientation="Horizontal" Margin="0,0,16,0">
                        <ui:SymbolIcon Symbol="ArrowCircleUp24" Foreground="#2196F3" FontSize="12"/>
                        <TextBlock Text="Improved" Margin="4,0,0,0" FontSize="12" Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                    </StackPanel>
                    
                    <StackPanel Orientation="Horizontal" Margin="0,0,16,0">
                        <ui:SymbolIcon Symbol="ArrowSync24" Foreground="#FFD700" FontSize="12"/>
                        <TextBlock Text="Updated" Margin="4,0,0,0" FontSize="12" Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                    </StackPanel>
                </WrapPanel>

                <!-- Changelog-Inhalt mit Scrollbar -->
                <ScrollViewer Grid.Row="2" 
                              VerticalScrollBarVisibility="Visible"
                              HorizontalScrollBarVisibility="Disabled"
                              Height="400"
                              Background="{DynamicResource ApplicationBackgroundBrush}"
                              PreviewMouseWheel="ScrollViewer_PreviewMouseWheel">
                    <StackPanel x:Name="ChangelogContent" Margin="0,8,16,0">
                        <!-- Die Inhalte werden dynamisch im Code-Behind generiert -->
                    </StackPanel>
                </ScrollViewer>
                
                <!-- Schließen-Button am unteren Rand -->
                <ui:Button Grid.Row="3"
                          Content="Close"
                          HorizontalAlignment="Center"
                          Margin="0,16,0,0"
                          Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                          Click="CloseButton_Click"/>
            </Grid>
        </ui:Card>
    </Grid>
</Page> 