<Page
    x:Class="eTools_Ultimate.Views.Pages.SkillPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:eTools_Ultimate.Views.Pages"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:models="clr-namespace:eTools_Ultimate.Models"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    xmlns:sys="clr-namespace:System;assembly=mscorlib"
    xmlns:converters="clr-namespace:eTools_Ultimate.Converters"
    Title="SkillPage"
    d:DataContext="{d:DesignInstance local:SkillPage,
                                     IsDesignTimeCreatable=False}"
    d:DesignHeight="791"
    d:DesignWidth="1024"
    ui:Design.Background="{DynamicResource ApplicationBackgroundBrush}"
    ui:Design.Foreground="{DynamicResource TextFillColorPrimaryBrush}"
    Foreground="{DynamicResource TextFillColorPrimaryBrush}"
    ScrollViewer.CanContentScroll="False"
    mc:Ignorable="d">

    <Page.Resources>
        <converters:NumberFormatConverter x:Key="NumberFormatConverter"/>
        <!-- Common Styles -->
        <Style x:Key="InfoIconStyle"
                TargetType="ui:SymbolIcon">
            <Setter Property="HorizontalAlignment"
                    Value="Right"/>
            <Setter Property="VerticalAlignment"
                    Value="Center"/>
            <Setter Property="FontSize"
                    Value="16"/>
            <Setter Property="Margin"
                    Value="5,0,0,0"/>
            <Setter Property="Foreground"
                    Value="{DynamicResource TextFillColorSecondaryBrush}"/>
        </Style>
        <Style x:Key="FormFieldStyle"
                TargetType="Grid">
            <Setter Property="Margin"
                    Value="0,0,15,25"/>
        </Style>
        <Style x:Key="FieldLabelStyle"
                TargetType="TextBlock">
            <Setter Property="Margin"
                    Value="0,0,0,5"/>
            <Setter Property="FontWeight"
                    Value="SemiBold"/>
        </Style>
        <Style x:Key="SectionHeaderStyle"
                TargetType="TextBlock">
            <Setter Property="FontSize"
                    Value="24"/>
            <Setter Property="FontWeight"
                    Value="Bold"/>
            <Setter Property="Margin"
                    Value="0,15,0,15"/>
        </Style>

        <!-- WPF UI Design System Resources -->
        <SolidColorBrush x:Key="ControlElevationBorderBrush"
                Color="#1A000000"/>
        <SolidColorBrush x:Key="ControlFillColorDefaultBrush"
                Color="#F3F3F3"/>
        <SolidColorBrush x:Key="TextFillColorSecondaryBrush"
                Color="#9E9E9E"/>
        <SolidColorBrush x:Key="ApplicationBackgroundBrush"
                Color="#FFFFFF"/>

        <!-- DataTemplate: Skill Basic Info Section -->
        <DataTemplate x:Key="BasicInfoSectionTemplate">
            <StackPanel>
                <TextBlock Text="Basic Information"
                        Style="{StaticResource SectionHeaderStyle}"/>
                <UniformGrid Columns="2">
                    <!-- ID -->
                    <Grid Style="{StaticResource FormFieldStyle}">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <StackPanel Grid.Row="0"
                                Orientation="Horizontal">
                            <TextBlock Text="ID"
                                    Style="{StaticResource FieldLabelStyle}"/>
                            <ui:SymbolIcon Symbol="Info20"
                                    Style="{StaticResource InfoIconStyle}">
                                <ui:SymbolIcon.ToolTip>
                                    <ToolTip Content="Unique ID of the skill"/>
                                </ui:SymbolIcon.ToolTip>
                            </ui:SymbolIcon>
                        </StackPanel>
                        <TextBox Grid.Row="1"
                                x:Name="IdTextBox"
                                Text="{Binding Prop.DwId, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                    </Grid>
                    <!-- Name -->
                    <Grid Style="{StaticResource FormFieldStyle}">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <StackPanel Grid.Row="0"
                                Orientation="Horizontal">
                            <TextBlock Text="Name"
                                    Style="{StaticResource FieldLabelStyle}"/>
                            <ui:SymbolIcon Symbol="Info20"
                                    Style="{StaticResource InfoIconStyle}">
                                <ui:SymbolIcon.ToolTip>
                                    <ToolTip Content="Display name of the skill"/>
                                </ui:SymbolIcon.ToolTip>
                            </ui:SymbolIcon>
                        </StackPanel>
                        <TextBox Grid.Row="1"
                                x:Name="NameTextBox"
                                Text="{Binding Name, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                    </Grid>
                    <!-- Grade (Class Stage) -->
                    <Grid Style="{StaticResource FormFieldStyle}">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <StackPanel Grid.Row="0"
                                Orientation="Horizontal">
                            <TextBlock Text="Grade (Class Stage)"
                                    Style="{StaticResource FieldLabelStyle}"/>
                            <ui:SymbolIcon Symbol="Info20"
                                    Style="{StaticResource InfoIconStyle}">
                                <ui:SymbolIcon.ToolTip>
                                    <ToolTip Content="Class stage, e.g. 1st, 2nd, 3rd"/>
                                </ui:SymbolIcon.ToolTip>
                            </ui:SymbolIcon>
                        </StackPanel>
                        <ComboBox Grid.Row="1"
                                x:Name="GradeComboBox"
                                SelectedValuePath="Value"
                                DisplayMemberPath="Key"
                                Text="{Binding Prop.DwItemKind1, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <ComboBoxItem Content="1st Grade"/>
                            <ComboBoxItem Content="2nd Grade"/>
                            <ComboBoxItem Content="3rd Grade"/>
                        </ComboBox>
                    </Grid>
                    <!-- Job (Required Jobs) -->
                    <Grid Style="{StaticResource FormFieldStyle}">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <StackPanel Grid.Row="0"
                                Orientation="Horizontal">
                            <TextBlock Text="Job (Required Class)"
                                    Style="{StaticResource FieldLabelStyle}"/>
                            <ui:SymbolIcon Symbol="Info20"
                                    Style="{StaticResource InfoIconStyle}">
                                <ui:SymbolIcon.ToolTip>
                                    <ToolTip Content="Required player class(es) for this skill"/>
                                </ui:SymbolIcon.ToolTip>
                            </ui:SymbolIcon>
                        </StackPanel>
                        <ComboBox Grid.Row="1"
                                x:Name="JobComboBox"
                                SelectedValuePath="Value"
                                DisplayMemberPath="Key"
                                Text="{Binding Prop.DwItemJob, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <ComboBoxItem Content="All"/>
                            <ComboBoxItem Content="Warrior"/>
                            <ComboBoxItem Content="Magician"/>
                            <ComboBoxItem Content="Archer"/>
                            <ComboBoxItem Content="Acrobat"/>
                        </ComboBox>
                    </Grid>
                    <!-- Secondary Type -->
                    <Grid Style="{StaticResource FormFieldStyle}">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <StackPanel Grid.Row="0"
                                Orientation="Horizontal">
                            <TextBlock Text="Secondary Type"
                                    Style="{StaticResource FieldLabelStyle}"/>
                            <ui:SymbolIcon Symbol="Info20"
                                    Style="{StaticResource InfoIconStyle}">
                                <ui:SymbolIcon.ToolTip>
                                    <ToolTip Content="Secondary type of the skill"/>
                                </ui:SymbolIcon.ToolTip>
                            </ui:SymbolIcon>
                        </StackPanel>
                        <ComboBox Grid.Row="1"
                                x:Name="SecondaryTypeComboBox"
                                SelectedValuePath="Value"
                                DisplayMemberPath="Key"
                                Text="{Binding Prop.DwItemKind2, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <ComboBoxItem Content="Passive"/>
                            <ComboBoxItem Content="Active"/>
                            <ComboBoxItem Content="Buff"/>
                            <ComboBoxItem Content="Debuff"/>
                        </ComboBox>
                    </Grid>
                    <!-- Max Level -->
                    <Grid Style="{StaticResource FormFieldStyle}">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <StackPanel Grid.Row="0"
                                Orientation="Horizontal">
                            <TextBlock Text="Maximum Level"
                                    Style="{StaticResource FieldLabelStyle}"/>
                            <ui:SymbolIcon Symbol="Info20"
                                    Style="{StaticResource InfoIconStyle}">
                                <ui:SymbolIcon.ToolTip>
                                    <ToolTip Content="Maximum level of the skill"/>
                                </ui:SymbolIcon.ToolTip>
                            </ui:SymbolIcon>
                        </StackPanel>
                        <ui:NumberBox Grid.Row="1"
                                x:Name="MaxLevelNumberBox"
                                Value="{Binding Prop.DwExpertMax, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource NumberFormatConverter}}"
                                Minimum="0"
                                Maximum="200"
                                SpinButtonPlacementMode="Inline"/>
                    </Grid>
                </UniformGrid>
            </StackPanel>
        </DataTemplate>

        <!-- DataTemplate: Skill Combat Details Section -->
        <DataTemplate x:Key="CombatDetailsSectionTemplate">
            <StackPanel>
                <TextBlock Text="Combat Details"
                        Style="{StaticResource SectionHeaderStyle}"/>
                <UniformGrid Columns="2">
                    <!-- Range -->
                    <Grid Style="{StaticResource FormFieldStyle}">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <StackPanel Grid.Row="0"
                                Orientation="Horizontal">
                            <TextBlock Text="Range"
                                    Style="{StaticResource FieldLabelStyle}"/>
                            <ui:SymbolIcon Symbol="Info20"
                                    Style="{StaticResource InfoIconStyle}">
                                <ui:SymbolIcon.ToolTip>
                                    <ToolTip Content="Range of the skill in units"/>
                                </ui:SymbolIcon.ToolTip>
                            </ui:SymbolIcon>
                        </StackPanel>
                        <TextBox Grid.Row="1"
                                x:Name="RangeTextBox"
                                Text="{Binding Prop.DwAttackRange, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                    </Grid>
                    <!-- Weapon Type -->
                    <Grid Style="{StaticResource FormFieldStyle}">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <StackPanel Grid.Row="0"
                                Orientation="Horizontal">
                            <TextBlock Text="Weapon Type"
                                    Style="{StaticResource FieldLabelStyle}"/>
                            <ui:SymbolIcon Symbol="Info20"
                                    Style="{StaticResource InfoIconStyle}">
                                <ui:SymbolIcon.ToolTip>
                                    <ToolTip Content="Required weapon type for the skill"/>
                                </ui:SymbolIcon.ToolTip>
                            </ui:SymbolIcon>
                        </StackPanel>
                        <ComboBox Grid.Row="1"
                                x:Name="WeaponTypeComboBox"
                                SelectedValuePath="Value"
                                DisplayMemberPath="Key"
                                Text="{Binding Prop.DwLinkKind, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <ComboBoxItem Content="None"/>
                            <ComboBoxItem Content="Sword"/>
                            <ComboBoxItem Content="Axe"/>
                            <ComboBoxItem Content="Bow"/>
                            <ComboBoxItem Content="Staff"/>
                            <ComboBoxItem Content="Any"/>
                        </ComboBox>
                    </Grid>
                    <!-- Type -->
                    <Grid Style="{StaticResource FormFieldStyle}">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <StackPanel Grid.Row="0"
                                Orientation="Horizontal">
                            <TextBlock Text="Type"
                                    Style="{StaticResource FieldLabelStyle}"/>
                            <ui:SymbolIcon Symbol="Info20"
                                    Style="{StaticResource InfoIconStyle}">
                                <ui:SymbolIcon.ToolTip>
                                    <ToolTip Content="Skill type/category"/>
                                </ui:SymbolIcon.ToolTip>
                            </ui:SymbolIcon>
                        </StackPanel>
                        <ComboBox Grid.Row="1"
                                x:Name="TypeComboBox"
                                SelectedValuePath="Value"
                                Text="{Binding Prop.eItemType, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <ComboBoxItem Content="Normal"/>
                            <ComboBoxItem Content="Buff"/>
                            <ComboBoxItem Content="Debuff"/>
                            <ComboBoxItem Content="AOE"/>
                            <ComboBoxItem Content="Heal"/>
                        </ComboBox>
                    </Grid>
                    <!-- Cooldown -->
                    <Grid Style="{StaticResource FormFieldStyle}">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <StackPanel Grid.Row="0"
                                Orientation="Horizontal">
                            <TextBlock Text="Cooldown (Sec.)"
                                    Style="{StaticResource FieldLabelStyle}"/>
                            <ui:SymbolIcon Symbol="Info20"
                                    Style="{StaticResource InfoIconStyle}">
                                <ui:SymbolIcon.ToolTip>
                                    <ToolTip Content="Cooldown time in seconds"/>
                                </ui:SymbolIcon.ToolTip>
                            </ui:SymbolIcon>
                        </StackPanel>
                        <ui:NumberBox Grid.Row="1"
                                x:Name="CooldownNumberBox"
                                Value="{Binding Prop.DwSkillReady, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource NumberFormatConverter}}"
                                Minimum="0"
                                Maximum="999999"
                                SpinButtonPlacementMode="Inline"/>
                    </Grid>
                    <!-- Target -->
                    <Grid Style="{StaticResource FormFieldStyle}">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <StackPanel Grid.Row="0"
                                Orientation="Horizontal">
                            <TextBlock Text="Target"
                                    Style="{StaticResource FieldLabelStyle}"/>
                            <ui:SymbolIcon Symbol="Info20"
                                    Style="{StaticResource InfoIconStyle}">
                                <ui:SymbolIcon.ToolTip>
                                    <ToolTip Content="Possible targets of the skill (e.g. self, party)"/>
                                </ui:SymbolIcon.ToolTip>
                            </ui:SymbolIcon>
                        </StackPanel>
                        <ComboBox Grid.Row="1"
                                x:Name="TargetComboBox"
                                SelectedValuePath="Value"
                                DisplayMemberPath="Key"
                                Text="{Binding Prop.DwExeTarget, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <ComboBoxItem Content="Self"/>
                            <ComboBoxItem Content="Single Target"/>
                            <ComboBoxItem Content="Party"/>
                            <ComboBoxItem Content="Enemy Party"/>
                            <ComboBoxItem Content="All"/>
                        </ComboBox>
                    </Grid>
                    <!-- Target Requirement -->
                    <Grid Style="{StaticResource FormFieldStyle}">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <StackPanel Grid.Row="0"
                                Orientation="Horizontal">
                            <TextBlock Text="Target Requirement"
                                    Style="{StaticResource FieldLabelStyle}"/>
                            <ui:SymbolIcon Symbol="Info20"
                                    Style="{StaticResource InfoIconStyle}">
                                <ui:SymbolIcon.ToolTip>
                                    <ToolTip Content="Condition to use the skill"/>
                                </ui:SymbolIcon.ToolTip>
                            </ui:SymbolIcon>
                        </StackPanel>
                        <ComboBox Grid.Row="1"
                                x:Name="TargetRequirementComboBox"
                                SelectedValuePath="Value"
                                DisplayMemberPath="Key"
                                Text="{Binding Prop.DwUseChance, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <ComboBoxItem Content="Anytime"/>
                            <ComboBoxItem Content="In Combat"/>
                            <ComboBoxItem Content="Out of Combat"/>
                            <ComboBoxItem Content="HP below 50%"/>
                            <ComboBoxItem Content="HP below 30%"/>
                        </ComboBox>
                    </Grid>
                    <!-- Spell Region -->
                    <Grid Style="{StaticResource FormFieldStyle}">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <StackPanel Grid.Row="0"
                                Orientation="Horizontal">
                            <TextBlock Text="Spell Region"
                                    Style="{StaticResource FieldLabelStyle}"/>
                            <ui:SymbolIcon Symbol="Info20"
                                    Style="{StaticResource InfoIconStyle}">
                                <ui:SymbolIcon.ToolTip>
                                    <ToolTip Content="Effect area of the skill (AOE or single target)"/>
                                </ui:SymbolIcon.ToolTip>
                            </ui:SymbolIcon>
                        </StackPanel>
                        <ComboBox Grid.Row="1"
                                x:Name="SpellRegionComboBox"
                                SelectedValuePath="Value"
                                DisplayMemberPath="Key"
                                Text="{Binding Prop.DwSpellRegion, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <ComboBoxItem Content="Single Target"/>
                            <ComboBoxItem Content="AOE Target"/>
                        </ComboBox>
                    </Grid>
                </UniformGrid>
            </StackPanel>
        </DataTemplate>
        
        <!-- DataTemplate for ListView Items -->
        <DataTemplate x:Key="SkillListTemplate">
            <Grid Margin="4">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Border Width="32"
                        Height="32"
                        Background="{DynamicResource CardBackgroundFillColorDefaultBrush}"
                        BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}"
                        BorderThickness="1"
                        Margin="0,0,8,0">
                    <Image Stretch="Uniform"
                            Margin="2"
                            Source="{Binding Icon}"/>
                </Border>
                <StackPanel Grid.Column="1"
                        VerticalAlignment="Center">
                    <TextBlock Text="{Binding Name}"
                            FontWeight="SemiBold"
                            Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                    <TextBlock Text="{Binding Prop.DwId}"
                            Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                            FontSize="12"/>
                </StackPanel>
            </Grid>
        </DataTemplate>
    </Page.Resources>

    <Grid x:Name="RootGrid">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="3*"/>
        </Grid.ColumnDefinitions>

        <!-- Left Side - ListView -->
        <Grid Grid.Column="0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Search Bar -->
            <Grid Grid.Row="0"
                    Margin="5,5,15,5">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <ui:TextBox Grid.Column="0"
                            PlaceholderText="Search skills..."
                            Icon="Search24"
                            Text="{Binding ViewModel.SearchText, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
            </Grid>

            <!-- Skill List -->
            <Border Grid.Row="1"
                    CornerRadius="8"
                    BorderThickness="1"
                    BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}"
                    Background="{DynamicResource CardBackgroundFillColorDefaultBrush}"
                    Margin="5,5,15,5">
                <ListView x:Name="SkillsListView"
                          BorderThickness="0"
                          Background="Transparent"
                          ItemTemplate="{StaticResource SkillListTemplate}"
                          SelectionChanged="SkillsListView_SelectionChanged"
                          ItemsSource="{Binding ViewModel.SkillsView}"
                          IsSynchronizedWithCurrentItem="True">
                    <ListView.ItemContainerStyle>
                        <Style TargetType="ListViewItem">
                            <Setter Property="Background"
                                    Value="Transparent"/>
                            <Setter Property="BorderBrush"
                                    Value="{DynamicResource ControlStrokeColorDefaultBrush}"/>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver"
                                        Value="True">
                                    <Setter Property="Background"
                                            Value="{DynamicResource ControlFillColorSecondaryBrush}"/>
                                </Trigger>
                                <Trigger Property="IsSelected"
                                        Value="True">
                                    <Setter Property="Background"
                                            Value="{DynamicResource ControlFillColorDefaultBrush}"/>
                                    <Setter Property="Foreground"
                                            Value="{DynamicResource TextFillColorPrimaryBrush}"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </ListView.ItemContainerStyle>
                </ListView>
            </Border>
        </Grid>

        <!-- Separator -->
        <GridSplitter Grid.Column="1"
                      Width="5"
                      HorizontalAlignment="Center"
                      VerticalAlignment="Stretch"
                      Background="{DynamicResource ControlElevationBorderBrush}"/>

        <!-- Right Side - Form -->
        <ScrollViewer Grid.Column="2"
                VerticalScrollBarVisibility="Auto">
            <Grid>
                <!-- Add und Delete Buttons oben rechts -->
                <StackPanel Orientation="Horizontal" 
                          HorizontalAlignment="Right" 
                          VerticalAlignment="Top"
                          Margin="0,10,20,0"
                          ZIndex="1">
                    <ui:Button x:Name="AddButton" 
                             Content="Add" 
                             Appearance="Primary"
                             Margin="0,0,10,0"
                             Click="AddButton_Click"/>
                    <ui:Button x:Name="DeleteButton" 
                             Content="Delete" 
                             Appearance="Danger"
                             Click="DeleteButton_Click"/>
                </StackPanel>
                
                <!-- Formulare -->
                <StackPanel Margin="20">
                    <ContentControl Content="{Binding ViewModel}" ContentTemplate="{StaticResource BasicInfoSectionTemplate}"/>
                    <Separator Margin="0,10,0,5"/>
                    <ContentControl Content="{Binding ViewModel}" ContentTemplate="{StaticResource CombatDetailsSectionTemplate}"/>
                </StackPanel>
            </Grid>
        </ScrollViewer>
    </Grid>
</Page> 