<Page
    x:Class="eTools_Ultimate.Views.Pages.ItemPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:eTools_Ultimate.Views.Pages"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:models="clr-namespace:eTools_Ultimate.Models"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    xmlns:sys="clr-namespace:System;assembly=mscorlib"
    Title="ItemPage"
    d:DataContext="{d:DesignInstance local:ItemPage,
                                     IsDesignTimeCreatable=False}"
    d:DesignHeight="800"
    d:DesignWidth="1200"
    ui:Design.Background="{DynamicResource ApplicationBackgroundBrush}"
    ui:Design.Foreground="{DynamicResource TextFillColorPrimaryBrush}"
    Foreground="{DynamicResource TextFillColorPrimaryBrush}"
    ScrollViewer.CanContentScroll="False"
    mc:Ignorable="d">

    <Page.Resources>
        <Style x:Key="InfoIconStyle" TargetType="ui:SymbolIcon">
            <Setter Property="HorizontalAlignment" Value="Right"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="Margin" Value="5,0,0,0"/>
            <Setter Property="Foreground" Value="{DynamicResource TextFillColorSecondaryBrush}"/>
        </Style>
        
        <Style x:Key="FormFieldStyle" TargetType="Grid">
            <Setter Property="Margin" Value="0,0,15,25"/>
        </Style>
        
        <Style x:Key="FieldLabelStyle" TargetType="TextBlock">
            <Setter Property="Margin" Value="0,0,0,5"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
        </Style>
        
        <Style x:Key="SectionHeaderStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="24"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Margin" Value="0,15,0,15"/>
        </Style>
    </Page.Resources>

    <!-- START GeneralSectionAll -->
    <DataTemplate x:Key="GeneralSectionAll">
        <Grid>
        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <StackPanel Margin="20">
                <!-- General Section -->
                <TextBlock Text="General" Style="{StaticResource SectionHeaderStyle}"/>

                <UniformGrid x:Name="GeneralSection" Columns="2">
                    <!-- Item ID -->
                    <Grid Style="{StaticResource FormFieldStyle}">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <StackPanel Grid.Row="0" Orientation="Horizontal">
                            <TextBlock Text="Item ID" Style="{StaticResource FieldLabelStyle}"/>
                            <ui:SymbolIcon Symbol="Info20" Style="{StaticResource InfoIconStyle}">
                                <ui:SymbolIcon.ToolTip>
                                    <ToolTip Content="ID from definition.h - Edit with caution"/>
                                </ui:SymbolIcon.ToolTip>
                            </ui:SymbolIcon>
                        </StackPanel>
                        <TextBox Grid.Row="1" x:Name="ItemIdTextBox"/>
                    </Grid>

                    <!-- In-game name (IDS key) -->
                    <Grid Style="{StaticResource FormFieldStyle}">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <StackPanel Grid.Row="0" Orientation="Horizontal">
                            <TextBlock Text="In-game name (IDS key)" Style="{StaticResource FieldLabelStyle}"/>
                            <ui:SymbolIcon Symbol="Info20" Style="{StaticResource InfoIconStyle}">
                                <ui:SymbolIcon.ToolTip>
                                    <ToolTip Content="Internal IDS key for the item name"/>
                                </ui:SymbolIcon.ToolTip>
                            </ui:SymbolIcon>
                        </StackPanel>
                        <TextBox Grid.Row="1" x:Name="IdsKeyTextBox"/>
                    </Grid>

                    <!-- InGame Name -->
                    <Grid Style="{StaticResource FormFieldStyle}">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <StackPanel Grid.Row="0" Orientation="Horizontal">
                            <TextBlock Text="InGame Name" Style="{StaticResource FieldLabelStyle}"/>
                            <ui:SymbolIcon Symbol="Info20" Style="{StaticResource InfoIconStyle}">
                                <ui:SymbolIcon.ToolTip>
                                    <ToolTip Content="Name displayed in game"/>
                                </ui:SymbolIcon.ToolTip>
                            </ui:SymbolIcon>
                        </StackPanel>
                        <TextBox Grid.Row="1" x:Name="InGameNameTextBox"/>
                    </Grid>

                    <!-- Description -->
                    <Grid Style="{StaticResource FormFieldStyle}">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <StackPanel Grid.Row="0" Orientation="Horizontal">
                            <TextBlock Text="Description" Style="{StaticResource FieldLabelStyle}"/>
                            <ui:SymbolIcon Symbol="Info20" Style="{StaticResource InfoIconStyle}">
                                <ui:SymbolIcon.ToolTip>
                                    <ToolTip Content="Description of the item"/>
                                </ui:SymbolIcon.ToolTip>
                            </ui:SymbolIcon>
                        </StackPanel>
                        <TextBox Grid.Row="1" x:Name="DescriptionTextBox" TextWrapping="Wrap" AcceptsReturn="True"/>
                    </Grid>

                    <!-- File Name -->
                    <Grid Style="{StaticResource FormFieldStyle}">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <StackPanel Grid.Row="0" Orientation="Horizontal">
                            <TextBlock Text="File Name" Style="{StaticResource FieldLabelStyle}"/>
                            <ui:SymbolIcon Symbol="Info20" Style="{StaticResource InfoIconStyle}">
                                <ui:SymbolIcon.ToolTip>
                                    <ToolTip Content="Filename from mdlDyna file - Edit with caution!"/>
                                </ui:SymbolIcon.ToolTip>
                            </ui:SymbolIcon>
                        </StackPanel>
                        <TextBox Grid.Row="1" x:Name="FileNameTextBox"/>
                    </Grid>

                    <!-- Item Icon - GeÃ¤ndert mit Button und Bildvorschau -->
                    <Grid Style="{StaticResource FormFieldStyle}">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <StackPanel Grid.Row="0" Orientation="Horizontal">
                            <TextBlock Text="Item Icon" Style="{StaticResource FieldLabelStyle}"/>
                            <ui:SymbolIcon Symbol="Info20" Style="{StaticResource InfoIconStyle}">
                                <ui:SymbolIcon.ToolTip>
                                    <ToolTip Content="Icon image displayed in game inventory"/>
                                </ui:SymbolIcon.ToolTip>
                            </ui:SymbolIcon>
                        </StackPanel>
                        <Grid Grid.Row="1">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBox Grid.Column="0" x:Name="ItemIconTextBox"/>
                            <ui:Button
                                Grid.Column="1"
                                Content="..."
                                VerticalAlignment="Center"
                                Margin="5,0,0,0"/>
                            <Border 
                                Grid.Column="2" 
                                Width="32" 
                                Height="32" 
                                Margin="10,0,0,0" 
                                Background="{DynamicResource ControlFillColorDefaultBrush}" 
                                BorderBrush="{DynamicResource ControlElevationBorderBrush}" 
                                BorderThickness="1">
                                <Image x:Name="ItemIconPreview" Stretch="Uniform" Margin="2">
                                    <Image.OpacityMask>
                                        <ImageBrush ImageSource="/Assets/wpfui-icon-256.png"/>
                                    </Image.OpacityMask>
                                </Image>
                            </Border>
                        </Grid>
                    </Grid>

                    <!-- Penya Value -->
                    <Grid Style="{StaticResource FormFieldStyle}">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <StackPanel Grid.Row="0" Orientation="Horizontal">
                            <TextBlock Text="Penya Value" Style="{StaticResource FieldLabelStyle}"/>
                            <ui:SymbolIcon Symbol="Info20" Style="{StaticResource InfoIconStyle}">
                                <ui:SymbolIcon.ToolTip>
                                    <ToolTip Content="In-game currency value"/>
                                </ui:SymbolIcon.ToolTip>
                            </ui:SymbolIcon>
                        </StackPanel>
                        <TextBox Grid.Row="1" x:Name="PenyaValueTextBox"/>
                    </Grid>

                    <!-- Tradeable & Shop-able -->
                    <Grid Style="{StaticResource FormFieldStyle}">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <StackPanel Grid.Row="0" Orientation="Horizontal">
                            <StackPanel Orientation="Vertical">
                                <TextBlock Text="Tradeable" Style="{StaticResource FieldLabelStyle}" />
                                <ui:ToggleSwitch OffContent="No" OnContent="Yes" IsChecked="False"/>
                            </StackPanel>
                            <StackPanel Orientation="Vertical" Margin="50,0,0,0">
                                <TextBlock Text="Shop-able" Style="{StaticResource FieldLabelStyle}" />
                                <ui:ToggleSwitch OffContent="No" OnContent="Yes" IsChecked="False"/>
                            </StackPanel>
                        </StackPanel>
                    </Grid>

                    <!-- Empty placeholder to maintain grid layout -->
                </UniformGrid>
                </DataTemplate>
                <!-- END GeneralSectionAll -->
            
    <!-- Separator -->
    <Separator Margin="0,10,0,5"/>
            
    <!-- START WeaponArmorSection -->
    <DataTemplate x:Key="WeaponArmorSection">
        <StackPanel>
            <!-- Inventory & Stack -->
            <TextBlock Text="Inventory &amp; Stack" Style="{StaticResource SectionHeaderStyle}"/>
            <UniformGrid Columns="2">
                <!-- Maximum stack size -->
                <Grid Style="{StaticResource FormFieldStyle}">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <StackPanel Grid.Row="0" Orientation="Horizontal">
                        <TextBlock Text="Maximum stack size" Style="{StaticResource FieldLabelStyle}"/>
                        <ui:SymbolIcon Symbol="Info20" Style="{StaticResource InfoIconStyle}">
                            <ui:SymbolIcon.ToolTip>
                                <ToolTip Content="Maximum number of items that can be stacked"/>
                            </ui:SymbolIcon.ToolTip>
                        </ui:SymbolIcon>
                    </StackPanel>
                    <TextBox Grid.Row="1" x:Name="MaxStackSizeTextBox"/>
                </Grid>

                <!-- Penya Price -->
                <Grid Style="{StaticResource FormFieldStyle}">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <StackPanel Grid.Row="0" Orientation="Horizontal">
                        <TextBlock Text="Penya Price" Style="{StaticResource FieldLabelStyle}"/>
                        <ui:SymbolIcon Symbol="Info20" Style="{StaticResource InfoIconStyle}">
                            <ui:SymbolIcon.ToolTip>
                                <ToolTip Content="Shop price in Penya"/>
                            </ui:SymbolIcon.ToolTip>
                        </ui:SymbolIcon>
                    </StackPanel>
                    <TextBox Grid.Row="1" x:Name="PenyaPriceTextBox"/>
                </Grid>
            </UniformGrid>

            <!-- Separator -->
            <Separator Margin="0,10,0,5"/>

            <!-- Character Requirements -->
            <TextBlock Text="Character Requirements" Style="{StaticResource SectionHeaderStyle}"/>
            <UniformGrid Columns="2">
                <!-- Gender restriction -->
                <Grid Style="{StaticResource FormFieldStyle}">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <StackPanel Grid.Row="0" Orientation="Horizontal">
                        <TextBlock Text="Gender restriction (0 = both)" Style="{StaticResource FieldLabelStyle}"/>
                        <ui:SymbolIcon Symbol="Info20" Style="{StaticResource InfoIconStyle}">
                            <ui:SymbolIcon.ToolTip>
                                <ToolTip Content="Gender restriction for the item (0 = both, 1 = male, 2 = female)"/>
                            </ui:SymbolIcon.ToolTip>
                        </ui:SymbolIcon>
                    </StackPanel>
                    <ComboBox Grid.Row="1" x:Name="GenderRestrictionComboBox">
                        <ComboBoxItem Content="Both (0)" IsSelected="True"/>
                        <ComboBoxItem Content="Male (1)"/>
                        <ComboBoxItem Content="Female (2)"/>
                    </ComboBox>
                </Grid>

                <!-- Required item level -->
                <Grid Style="{StaticResource FormFieldStyle}">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <StackPanel Grid.Row="0" Orientation="Horizontal">
                        <TextBlock Text="Required item level" Style="{StaticResource FieldLabelStyle}"/>
                        <ui:SymbolIcon Symbol="Info20" Style="{StaticResource InfoIconStyle}">
                            <ui:SymbolIcon.ToolTip>
                                <ToolTip Content="Item level requirement"/>
                            </ui:SymbolIcon.ToolTip>
                        </ui:SymbolIcon>
                    </StackPanel>
                    <TextBox Grid.Row="1" x:Name="RequiredItemLevelTextBox"/>
                </Grid>

                <!-- Item rarity -->
                <Grid Style="{StaticResource FormFieldStyle}">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <StackPanel Grid.Row="0" Orientation="Horizontal">
                        <TextBlock Text="Item rarity" Style="{StaticResource FieldLabelStyle}"/>
                        <ui:SymbolIcon Symbol="Info20" Style="{StaticResource InfoIconStyle}">
                            <ui:SymbolIcon.ToolTip>
                                <ToolTip Content="Rarity of the item"/>
                            </ui:SymbolIcon.ToolTip>
                        </ui:SymbolIcon>
                    </StackPanel>
                    <ComboBox Grid.Row="1" x:Name="ItemRarityComboBox">
                        <ComboBoxItem Content="Common" IsSelected="True"/>
                        <ComboBoxItem Content="Uncommon"/>
                        <ComboBoxItem Content="Rare"/>
                        <ComboBoxItem Content="Epic"/>
                        <ComboBoxItem Content="Legendary"/>
                    </ComboBox>
                </Grid>

                <!-- Level limit -->
                <Grid Style="{StaticResource FormFieldStyle}">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <StackPanel Grid.Row="0" Orientation="Horizontal">
                        <TextBlock Text="Level limit" Style="{StaticResource FieldLabelStyle}"/>
                        <ui:SymbolIcon Symbol="Info20" Style="{StaticResource InfoIconStyle}">
                            <ui:SymbolIcon.ToolTip>
                                <ToolTip Content="Level limit for the item"/>
                            </ui:SymbolIcon.ToolTip>
                        </ui:SymbolIcon>
                    </StackPanel>
                    <TextBox Grid.Row="1" x:Name="LevelLimitTextBox"/>
                </Grid>

                <!-- Minimum level required -->
                <Grid Style="{StaticResource FormFieldStyle}">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <StackPanel Grid.Row="0" Orientation="Horizontal">
                        <TextBlock Text="Minimum level required" Style="{StaticResource FieldLabelStyle}"/>
                        <ui:SymbolIcon Symbol="Info20" Style="{StaticResource InfoIconStyle}">
                            <ui:SymbolIcon.ToolTip>
                                <ToolTip Content="Minimum character level required to use this item"/>
                            </ui:SymbolIcon.ToolTip>
                        </ui:SymbolIcon>
                    </StackPanel>
                    <TextBox Grid.Row="1" x:Name="MinLevelRequiredTextBox"/>
                </Grid>

                <!-- Maximum level limit -->
                <Grid Style="{StaticResource FormFieldStyle}">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <StackPanel Grid.Row="0" Orientation="Horizontal">
                        <TextBlock Text="Maximum level limit" Style="{StaticResource FieldLabelStyle}"/>
                        <ui:SymbolIcon Symbol="Info20" Style="{StaticResource InfoIconStyle}">
                            <ui:SymbolIcon.ToolTip>
                                <ToolTip Content="Maximum character level that can use this item"/>
                            </ui:SymbolIcon.ToolTip>
                        </ui:SymbolIcon>
                    </StackPanel>
                    <TextBox Grid.Row="1" x:Name="MaxLevelLimitTextBox"/>
                </Grid>

                <!-- Item group classification -->
                <Grid Style="{StaticResource FormFieldStyle}">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <StackPanel Grid.Row="0" Orientation="Horizontal">
                        <TextBlock Text="Item group classification" Style="{StaticResource FieldLabelStyle}"/>
                        <ui:SymbolIcon Symbol="Info20" Style="{StaticResource InfoIconStyle}">
                            <ui:SymbolIcon.ToolTip>
                                <ToolTip Content="Item group classification"/>
                            </ui:SymbolIcon.ToolTip>
                        </ui:SymbolIcon>
                    </StackPanel>
                    <TextBox Grid.Row="1" x:Name="ItemGroupClassificationTextBox"/>
                </Grid>
            </UniformGrid>
        </StackPanel>
    </DataTemplate>

</Page>
